/*! Built with http://stenciljs.com */
const{h:t}=window.App;class o{constructor(){this.cTop=-1,this.cBottom=-1,this.dirty=!1,this.fullscreen=!1,this.scrollEnabled=!0,this.scrollEvents=!1}onNavChanged(){this.resize()}componentDidLoad(){this.resize()}componentDidUnload(){this.scrollEl=void 0}scrollToTop(t=300){if(!this.scrollEl)throw new Error("content is not scrollable");return this.scrollEl.scrollToTop(t)}scrollToBottom(t=300){if(!this.scrollEl)throw new Error("content is not scrollable");return this.scrollEl.scrollToBottom(t)}scrollByPoint(t,o,l,e){if(!this.scrollEl)throw new Error("content is not scrollable");return this.scrollEl.scrollByPoint(t,o,l,e)}scrollToPoint(t,o,l,e){if(!this.scrollEl)throw new Error("content is not scrollable");return this.scrollEl.scrollToPoint(t,o,l,e)}resize(){this.scrollEl&&(this.fullscreen?this.queue.read(()=>{this.queue.read(this.readDimensions.bind(this)),this.queue.write(this.writeDimensions.bind(this))}):(this.cTop=this.cBottom=-1,this.queue.write(()=>this.scrollEl&&this.scrollEl.removeAttribute("style"))))}readDimensions(){const t=function(t){const o=t.closest("ion-tabs");if(o)return o;const l=t.closest("ion-app,ion-page,.ion-page,page-inner");return l||function(t){return t.parentElement?t.parentElement:t.parentNode&&t.parentNode.host?t.parentNode.host:null}(t)}(this.el),o=Math.max(this.el.offsetTop,0),l=Math.max(t.offsetHeight-o-this.el.offsetHeight,0);this.dirty=o!==this.cTop||l!==this.cBottom,this.cTop=o,this.cBottom=l}writeDimensions(){if(this.dirty&&this.scrollEl){const t=this.scrollEl.style;t.paddingTop=this.cTop+"px",t.paddingBottom=this.cBottom+"px",t.top=-this.cTop+"px",t.bottom=-this.cBottom+"px",this.dirty=!1}}render(){return this.resize(),[this.scrollEnabled?t("ion-scroll",{ref:t=>this.scrollEl=t,mode:this.mode,scrollEvents:this.scrollEvents,forceOverscroll:this.forceOverscroll},t("slot",null)):t("div",{class:"scroll-inner"},t("slot",null)),t("slot",{name:"fixed"})]}static get is(){return"ion-content"}static get properties(){return{config:{context:"config"},el:{elementRef:!0},forceOverscroll:{type:Boolean,attr:"force-overscroll"},fullscreen:{type:Boolean,attr:"fullscreen"},queue:{context:"queue"},scrollByPoint:{method:!0},scrollEnabled:{type:Boolean,attr:"scroll-enabled"},scrollEvents:{type:Boolean,attr:"scroll-events"},scrollToBottom:{method:!0},scrollToPoint:{method:!0},scrollToTop:{method:!0}}}static get listeners(){return[{name:"body:ionNavDidChange",method:"onNavChanged"}]}static get style(){return"ion-content{position:relative;display:block;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;contain:layout size style;margin:0!important;padding:0!important}ion-content>.scroll-inner{min-height:100%}"}}class l{constructor(){this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.scrollEvents=!1,this.detail={positions:[],scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,data:void 0,isScrolling:!0}}componentWillLoad(){void 0===this.forceOverscroll&&(this.forceOverscroll="ios"===this.mode&&"ontouchstart"in this.win)}componentDidUnload(){this.watchDog&&clearInterval(this.watchDog)}onScroll(t){const o=Date.now(),l=!this.isScrolling;this.lastScroll=o,l&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,this.queue.read(o=>{this.queued=!1,this.detail.event=t,function(t,o,l,e){const s=o.scrollTop,r=o.scrollLeft,i=t.positions;e&&(t.startTimeStamp=l,t.startY=s,t.startX=r,i.length=0),t.timeStamp=l,t.currentY=t.scrollTop=s,t.currentX=t.scrollLeft=r,t.deltaY=s-t.startY,t.deltaX=r-t.startX,i.push(s,r,l);const n=l-100;let c=i.length-1;for(;c>0&&i[c]>n;)c-=3;if(c>3){const o=1/(i[c]-l),e=i[c-1]-r,n=i[c-2]-s;t.velocityX=e*o,t.velocityY=n*o}else t.velocityX=0,t.velocityY=0}(this.detail,this.el,o,l),this.ionScroll.emit(this.detail)}))}scrollToTop(t){return this.scrollToPoint(0,0,t)}scrollToBottom(t){const o=this.el?this.el.scrollHeight-this.el.clientHeight:0;return this.scrollToPoint(0,o,t)}scrollByPoint(t,o,l,e){return this.scrollToPoint(t+this.el.scrollLeft,o+this.el.scrollTop,l,e)}scrollToPoint(t,o,l,e){let s;const r=new Promise(t=>{s=t}).then(()=>e&&e()),i=this,n=i.el;if(!n)return s(),r;if(l<32)return n.scrollTop=o,n.scrollLeft=t,s(),r;const c=n.scrollTop,h=n.scrollLeft,a=l/16+100;let d,u=0,m=!1;function p(e){if(u++,!i.el||m||u>a)return i.isScrolling=!1,n.style.transform=n.style.webkitTransform="",void s();let r=Math.min(1,(e-d)/l);const f=--r*r*r+1;c!==o&&(n.scrollTop=f*(o-c)+c),h!==t&&(n.scrollLeft=Math.floor(f*(t-h)+h)),f<1?i.queue.read(p):(m=!0,i.isScrolling=!1,n.style.transform=n.style.webkitTransform="",s())}return i.isScrolling=!0,this.queue.write(()=>{this.queue.write(t=>{d=t,p(t)})}),r}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){clearInterval(this.watchDog),this.watchDog=null,this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1})}hostData(){return{class:{overscroll:this.forceOverscroll}}}render(){return[t("div",{class:"scroll-inner"},t("slot",null))]}static get is(){return"ion-scroll"}static get host(){return{theme:"scroll"}}static get properties(){return{config:{context:"config"},el:{elementRef:!0},forceOverscroll:{type:Boolean,attr:"force-overscroll",mutable:!0},mode:{type:String,attr:"mode"},queue:{context:"queue"},scrollByPoint:{method:!0},scrollEvents:{type:Boolean,attr:"scroll-events"},scrollToBottom:{method:!0},scrollToPoint:{method:!0},scrollToTop:{method:!0},win:{context:"window"}}}static get events(){return[{name:"ionScrollStart",method:"ionScrollStart",bubbles:!0,cancelable:!0,composed:!0},{name:"ionScroll",method:"ionScroll",bubbles:!1,cancelable:!0,composed:!0},{name:"ionScrollEnd",method:"ionScrollEnd",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"scroll",method:"onScroll",passive:!0}]}static get style(){return"ion-scroll{left:0;right:0;top:0;bottom:0;position:absolute;z-index:1;display:block;overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;will-change:scroll-position;contain:size style layout}ion-scroll .focus-input{margin:0;padding:0;position:absolute;width:0;height:0;border:0;background:0 0;opacity:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}ion-scroll.overscroll::after,ion-scroll.overscroll::before{position:absolute;width:1px;height:1px;content:\"\"}ion-scroll.overscroll::before{bottom:-1px}ion-scroll.overscroll::after{top:-1px}ion-scroll>.scroll-inner{min-height:100%}.outer-content .scroll-ios{background:var(--ion-background-ios-color-step-50,var(--ion-background-color-step-50,#f2f2f2))}.scroll-ios{font-family:-apple-system,BlinkMacSystemFont,\"Helvetica Neue\",Roboto,sans-serif;color:var(--ion-text-ios-color,var(--ion-text-color,#000));background-color:var(--ion-background-ios-color,var(--ion-background-color,#fff))}.scroll-ios hr{height:.55px;background-color:rgba(var(--ion-background-ios-color-rgb,var(--ion-background-color-rgb,255,255,255)),.25)}"}static get styleMode(){return"ios"}}export{o as IonContent,l as IonScroll};